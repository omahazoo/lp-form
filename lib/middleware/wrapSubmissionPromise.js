"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _get2=_interopRequireDefault(require("lodash/fp/get"));var _withPropsOnChange2=_interopRequireDefault(require("recompose/withPropsOnChange"));var _reduxForm=require("redux-form");var _isPromise=_interopRequireDefault(require("is-promise"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var wrapSubmissionPromise=(0,_withPropsOnChange2["default"])(["onSubmit"],function(_ref){var _onSubmit=_ref.onSubmit;return{onSubmit:function onSubmit(){var result=_onSubmit.apply(void 0,arguments);if(!(0,_isPromise["default"])(result))return Promise.resolve(result);return result["catch"](wrapSubmissionError)}}});function wrapSubmissionError(error){var messages=getErrorMessages(error);var submissionError=new _reduxForm.SubmissionError(messages);submissionError.meta={error:error};throw submissionError}function getErrorMessages(err){var messages=(0,_get2["default"])("errors",err);if(messages)return messages;var formWideError=(0,_get2["default"])("message",err);return formWideError?{_error:formWideError}:{}}var _default=wrapSubmissionPromise;exports["default"]=_default;